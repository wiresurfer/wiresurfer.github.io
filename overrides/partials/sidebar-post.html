<!-- Blog Post Left Sidebar -->
<div class="blog-post-sidebar">

  <!-- Back Button -->
  <a href="/blog/" class="sidebar-back-btn">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M19 12H5"></path>
      <path d="m12 19-7-7 7-7"></path>
    </svg>
    Back to Blog
  </a>

  <!-- Author Card -->
  <div class="sidebar-author-card">
    {% if page.authors %}
      <img src="{{ page.authors[0].avatar | url }}" alt="{{ page.authors[0].name }}" class="sidebar-author-photo">
      <h4 class="sidebar-author-name">{{ page.authors[0].name }}</h4>
      <p class="sidebar-author-bio">{{ page.authors[0].description }}</p>
    {% else %}
      <img src="/assets/images/shaishav-profile.jpg" alt="Shaishav Kr" class="sidebar-author-photo">
      <h4 class="sidebar-author-name">Shaishav Kr</h4>
      <p class="sidebar-author-bio">Follow on X @wiresurfer</p>
    {% endif %}
  </div>

  <!-- Post Metadata -->
  <div class="sidebar-meta">
    <div class="meta-item">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <polyline points="12 6 12 12 16 14"></polyline>
      </svg>
      {% if page.config.readtime %}
        {% set time = page.config.readtime %}
        <span>{% if time == 1 %}{{ lang.t("readtime.one") }}{% else %}{{ lang.t("readtime.other") | replace("#", time) }}{% endif %}</span>
      {% elif page.meta.readtime %}
        <span>{{ page.meta.readtime }} min read</span>
      {% else %}
        <span>5 min read</span>
      {% endif %}
    </div>
    <div class="meta-item">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="16" y1="2" x2="16" y2="6"></line>
        <line x1="8" y1="2" x2="8" y2="6"></line>
        <line x1="3" y1="10" x2="21" y2="10"></line>
      </svg>
      {% if page.config.date %}
        <time datetime="{{ page.config.date.created }}">{{ page.config.date.created | date }}</time>
      {% elif page.meta.date %}
        <time datetime="{{ page.meta.date }}">{{ page.meta.date.strftime('%b %d, %Y') }}</time>
      {% endif %}
    </div>
  </div>

  <!-- Categories -->
  {% if page.categories %}
  <div class="sidebar-section">
    <h5 class="sidebar-section-title">Categories</h5>
    <div class="sidebar-categories">
      {% for category in page.categories %}
        <a href="{{ category.url | url }}" class="sidebar-category-pill">{{ category.title }}</a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- Tags -->
  {% if page.meta.tags %}
  <div class="sidebar-section">
    <h5 class="sidebar-section-title">Tags</h5>
    <div class="sidebar-tags">
      {% for tag in page.meta.tags %}
        <span class="sidebar-tag-pill">{{ tag.replace('topic/', '').replace('-', ' ').title() }}</span>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- Share CTA Section -->
  <div class="sidebar-share">
    <h5 class="sidebar-section-title">Share this post</h5>

    <button class="sidebar-share-btn btn-copy-link" onclick="copyLinkToClipboard(event)" title="Copy link">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
      Copy Link
    </button>

    <a href="https://twitter.com/intent/tweet?url={{ config.site_url }}{{ page.url | url }}&text={{ page.title | urlencode }}"
       class="sidebar-share-btn btn-twitter"
       target="_blank"
       rel="noopener noreferrer"
       title="Share on Twitter">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
      </svg>
      Tweet
    </a>

    <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ config.site_url }}{{ page.url | url }}"
       class="sidebar-share-btn btn-linkedin"
       target="_blank"
       rel="noopener noreferrer"
       title="Share on LinkedIn">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
        <rect x="2" y="9" width="4" height="12"></rect>
        <circle cx="4" cy="4" r="2"></circle>
      </svg>
      Share
    </a>
  </div>
</div>

<script>
function copyLinkToClipboard(event) {
  event.preventDefault();
  const url = window.location.href;

  navigator.clipboard.writeText(url).then(() => {
    const btn = event.currentTarget;
    const originalHTML = btn.innerHTML;

    btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg> Copied!';
    btn.style.backgroundColor = 'rgba(76, 175, 80, 0.2)';
    btn.style.borderColor = 'rgba(76, 175, 80, 0.5)';
    btn.style.color = '#4CAF50';

    setTimeout(() => {
      btn.innerHTML = originalHTML;
      btn.style.backgroundColor = '';
      btn.style.borderColor = '';
      btn.style.color = '';
    }, 2000);
  }).catch((error) => {
    console.error('Failed to copy:', error);
    alert('Could not copy link. Please copy manually.');
  });
}
</script>
